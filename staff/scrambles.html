<!DOCTYPE HTML>
<html>
	<head>
		<script>
		    var size = 3;
		    var seqlen = 30;
		    var numcub = 5;
		    var mult = true;
		    var cubeorient = false;
		    var colorString = "yobwrg";
		    var colorList = new Array('y',"y.jpg","y",'b',"b.jpg","b",'r',"r.jpg","r",'w',"w.jpg","w",'g',"g.jpg","g",'o',"o.jpg","o",);
		    var colors = new Array();
		    var seq = new Array();
		    var posit = new Array();
		    var flat2posit;
		    var colorPerm = new Array();
		    colorPerm[0] = new Array(0,1,2,3,4,5);
		    colorPerm[1] = new Array(0,2,4,3,5,1);
		    colorPerm[2] = new Array(0,4,5,3,1,2);
		    colorPerm[3] = new Array(0,5,1,3,2,4);
		    colorPerm[4] = new Array(1,0,5,4,3,2);
		    colorPerm[5] = new Array(1,2,0,4,5,3);
		    colorPerm[6] = new Array(1,3,2,4,0,5);
		    colorPerm[7] = new Array(1,5,3,4,2,0);
		    colorPerm[8] = new Array(2,0,1,5,3,4);
		    colorPerm[9] = new Array(2,1,3,5,4,0);
		    colorPerm[10] = new Array(2,3,4,5,0,1);
		    colorPerm[11] = new Array(2,4,0,5,1,3);
		    colorPerm[12] = new Array(3,1,5,0,4,2);
		    colorPerm[13] = new Array(3,2,1,0,5,4);
		    colorPerm[14] = new Array(3,4,2,0,1,5);
		    colorPerm[15] = new Array(3,5,4,0,2,1);
		    colorPerm[16] = new Array(4,0,2,1,3,5);
		    colorPerm[17] = new Array(4,2,3,1,5,0);
		    colorPerm[18] = new Array(4,3,5,1,0,2);
		    colorPerm[19] = new Array(4,5,0,1,2,3);
		    colorPerm[20] = new Array(5,0,4,2,3,1);
		    colorPerm[21] = new Array(5,1,0,2,4,3);
		    colorPerm[22] = new Array(5,3,1,2,0,4);
		    colorPerm[23] = new Array(5,4,3,2,1,0);
		    function parseURL() {
		        var s = "";
		        var urlquery = location.href.split("?");
		        if (urlquery.length > 1) {
		            var urlterms = urlquery[1].split("&");
		            for (var i = 0; i < urlterms.length; i++) {
		                var urllr = urlterms[i].split("=");
		                if (urllr[0] == "size") {
		                    if (urllr[1] - 0 >= 2)
		                        size = urllr[1] - 0;
		                } else if (urllr[0] == "len") {
		                    if (urllr[1] - 0 >= 1)
		                        seqlen = urllr[1] - 0;
		                } else if (urllr[0] == "num") {
		                    if (urllr[1] - 0 >= 1)
		                        numcub = urllr[1] - 0;
		                }
		            }
		        }
		        for (var k = 0; k < 6; k++) {
		            colors[k] = colorList.length - 3;
		            for (var i = 0; i < colorList.length; i += 3) {
		                if (colorString.charAt(k) == colorList[i]) {
		                    colors[k] = i;
		                    break;
		                }
		            }
		        }
		    }
		    function appendmoves(sq, axsl, tl, la) {
		        for (var sl = 0; sl < tl; sl++) {
		            if (axsl[sl]) {
		                var q = axsl[sl] - 1;
		                var sa = la;
		                var m = sl;
		                if (sl + sl + 1 >= tl) {
		                    sa += 3;
		                    m = tl - 1 - m;
		                    q = 2 - q;
		                }
		                sq[sq.length] = (m * 6 + sa) * 4 + q;
		            }
		        }
		    }
		    function scramble() {
		        var tl = size;
		        if (mult || (size & 1) != 0)
		            tl--;
		        var axsl = new Array(tl);
		        var axam = new Array(0,0,0);
		        var la;
		        for (n = 0; n < numcub; n++) {
		            la = -1;
		            seq[n] = new Array();
		            for (var i = 0; i < tl; i++)
		                axsl[i] = 0;
		            axam[0] = axam[1] = axam[2] = 0;
		            var moved = 0;
		            while (seq[n].length + moved < seqlen) {
		                var ax, sl, q;
		                do {
		                    do {
		                        ax = Math.floor(Math.random() * 3);
		                        sl = Math.floor(Math.random() * tl);
		                        q = Math.floor(Math.random() * 3);
		                    } while (ax == la && axsl[sl] != 0);
		                } while (ax == la && !mult && tl == size && (2 * axam[0] == tl || 2 * axam[1] == tl || 2 * axam[2] == tl || (2 * (axam[q] + 1) == tl && axam[0] + axam[1] + axam[2] - axam[q] > 0)));if (ax != la) {
		                    appendmoves(seq[n], axsl, tl, la);
		                    for (var i = 0; i < tl; i++)
		                        axsl[i] = 0;
		                    axam[0] = axam[1] = axam[2] = 0;
		                    moved = 0;
		                    la = ax;
		                }
		                axam[q]++;
		                moved++;
		                axsl[sl] = q + 1;
		            }
		            appendmoves(seq[n], axsl, tl, la);
		            seq[n][seq[n].length] = cubeorient ? Math.floor(Math.random() * 24) : 0;
		        }
		        flat2posit = new Array(12 * size * size);
		        for (i = 0; i < flat2posit.length; i++)
		            flat2posit[i] = -1;
		        for (i = 0; i < size; i++) {
		            for (j = 0; j < size; j++) {
		                flat2posit[4 * size * (3 * size - i - 1) + size + j] = i * size + j;
		                flat2posit[4 * size * (size + i) + size - j - 1] = (size + i) * size + j;
		                flat2posit[4 * size * (size + i) + 4 * size - j - 1] = (2 * size + i) * size + j;
		                flat2posit[4 * size * (i) + size + j] = (3 * size + i) * size + j;
		                flat2posit[4 * size * (size + i) + 2 * size + j] = (4 * size + i) * size + j;
		                flat2posit[4 * size * (size + i) + size + j] = (5 * size + i) * size + j;
		            }
		        }
		    }
		    function scramblestring(n) {
		        var s = "", j;
		        for (var i = 0; i < seq[n].length - 1; i++) {
		            if (i != 0)
		                s += " ";
		            var k = seq[n][i] >> 2;
		            j = k % 6;
		            k = (k - j) / 6;
		            if (k && size <= 5 && !mult) {
		                s += "dlburf".charAt(j);
		            } else {
		                if (size <= 5 && mult) {
		                    s += "DLBURF".charAt(j);
		                    if (k)
		                        s += "w";
		                } else {
		                    if (k)
		                        s += (k + 1);
		                    s += "DLBURF".charAt(j);
		                }
		            }
		            j = seq[n][i] & 3;
		            if (j != 0)
		                s += " 2'".charAt(j);
		        }
		        return s;
		    }
		    function imagestring(nr) {
		        var s = "", i, f, d = 0, q;
		        for (i = 0; i < 6; i++)
		            for (f = 0; f < size * size; f++)
		                posit[d++] = i;
		        for (i = 0; i < seq[nr].length - 1; i++) {
		            q = seq[nr][i] & 3;
		            f = seq[nr][i] >> 2;
		            d = 0;
		            while (f > 5) {
		                f -= 6;
		                d++;
		            }
		            do {
		                doslice(f, d, q + 1);
		                d--;
		            } while (mult && d >= 0);
		        }
		        var ori = seq[nr][seq[nr].length - 1];
		        d = 0;
		        var imageheight = 160;
		        var stickerheight = Math.floor(imageheight / (size * 3));
		        if (stickerheight < 5) {
		            stickerheight = 5;
		        }
		        s = "<div style='width:" + (stickerheight * size * 4) + "px; height:" + (stickerheight * size * 3) + "px;'>";
		        for (i = 0; i < 3 * size; i++) {
		            s += "<div style='float: left; display: block; height: " + stickerheight + "px; width: " + (stickerheight * size * 4) + "px; line-height: 0px;'>";
		            for (f = 0; f < 4 * size; f++) {
		                if (flat2posit[d] < 0) {
		                    s += "<div style='overflow: hidden; display: block; float: left; height: " + stickerheight + "px; width: " + stickerheight + "px;'><\/div>";
		                } else {
		                    var c = colorPerm[ori][posit[flat2posit[d]]];
		                    s += "<div style='overflow: hidden; display: block; float: left; border: 1px solid #000; height: " + (stickerheight * 1 - 2) + "px; width: " + (stickerheight * 1 - 2) + "px;'><img src='scrbg/" + colorList[colors[c] + 1] + "' /><\/div>";
		                }
		                d++;
		            }
		            s += "<\/div>";
		        }
		        s += "<\/div>";
		        return (s);
		    }
		    function doslice(f, d, q) {
		        var f1, f2, f3, f4;
		        var s2 = size * size;
		        var c, i, j, k;
		        if (f > 5)
		            f -= 6;
		        for (k = 0; k < q; k++) {
		            for (i = 0; i < size; i++) {
		                if (f == 0) {
		                    f1 = 6 * s2 - size * d - size + i;
		                    f2 = 2 * s2 - size * d - 1 - i;
		                    f3 = 3 * s2 - size * d - 1 - i;
		                    f4 = 5 * s2 - size * d - size + i;
		                } else if (f == 1) {
		                    f1 = 3 * s2 + d + size * i;
		                    f2 = 3 * s2 + d - size * (i + 1);
		                    f3 = s2 + d - size * (i + 1);
		                    f4 = 5 * s2 + d + size * i;
		                } else if (f == 2) {
		                    f1 = 3 * s2 + d * size + i;
		                    f2 = 4 * s2 + size - 1 - d + size * i;
		                    f3 = d * size + size - 1 - i;
		                    f4 = 2 * s2 - 1 - d - size * i;
		                } else if (f == 3) {
		                    f1 = 4 * s2 + d * size + size - 1 - i;
		                    f2 = 2 * s2 + d * size + i;
		                    f3 = s2 + d * size + i;
		                    f4 = 5 * s2 + d * size + size - 1 - i;
		                } else if (f == 4) {
		                    f1 = 6 * s2 - 1 - d - size * i;
		                    f2 = size - 1 - d + size * i;
		                    f3 = 2 * s2 + size - 1 - d + size * i;
		                    f4 = 4 * s2 - 1 - d - size * i;
		                } else if (f == 5) {
		                    f1 = 4 * s2 - size - d * size + i;
		                    f2 = 2 * s2 - size + d - size * i;
		                    f3 = s2 - 1 - d * size - i;
		                    f4 = 4 * s2 + d + size * i;
		                }
		                c = posit[f1];
		                posit[f1] = posit[f2];
		                posit[f2] = posit[f3];
		                posit[f3] = posit[f4];
		                posit[f4] = c;
		            }
		            if (d == 0) {
		                for (i = 0; i + i < size; i++) {
		                    for (j = 0; j + j < size - 1; j++) {
		                        f1 = f * s2 + i + j * size;
		                        f3 = f * s2 + (size - 1 - i) + (size - 1 - j) * size;
		                        if (f < 3) {
		                            f2 = f * s2 + (size - 1 - j) + i * size;
		                            f4 = f * s2 + j + (size - 1 - i) * size;
		                        } else {
		                            f4 = f * s2 + (size - 1 - j) + i * size;
		                            f2 = f * s2 + j + (size - 1 - i) * size;
		                        }
		                        c = posit[f1];
		                        posit[f1] = posit[f2];
		                        posit[f2] = posit[f3];
		                        posit[f3] = posit[f4];
		                        posit[f4] = c;
		                    }
		                }
		            }
		        }
		    }
		    parseURL();
		</script>
		<style>
		    .style1 {
		        overflow: hidden;
		        display: block;
		        float: left;
		        height: 17px;
		        width: 17px
		    }

		    p {
		        font-family: Arial;
		        font-size: 14pt;
		    }
		    input {
		    	maxlength: 2;
		    }
		</style>
	</head> 
	<body>
	    <script>
	        scramble();
	        for (var i = 0; i < numcub; i++) {document.writeln((i + 1 + ". ") + scramblestring(i) + imagestring(i));}
	    </script>
	</body>
</html>